#!/bin/sh

# dwmblocks wrapper for Termux

if [ -n "$SSH_CLIENT" ] || [ -n "$SSH_TTY" ]; then
	modules() {
		# sb-kbselect
		#cat "$PREFIX"/tmp/recordingicon 2>/dev/null
		sb-tasks
		# sb-music
		sb-pacpackages
		sb-news
		# sb-price xmr-btc "Monero to Bitcoin" ðŸ”’ 25
		# sb-price xmr Monero ðŸ”’ 24
		# sb-price eth Ethereum ðŸ¸ 23
		# sb-price btc Bitcoin ðŸ’° 21
		sb-torrent
		# sb-memory
		# sb-cpu
		# sb-moonphase
		sb-doppler
		sb-forecast
		sb-mailbox
		#sb-nettraf
		sb-volume
		sb-battery
		sb-clock
		sb-internet
		# sb-iplocate
		sb-help-icon
		}
	status() {
		status="$(modules | tr "\n" " ")"
		set -- $status; status="$*"
		echo "$status" 2>/dev/null
	}
	while :; do
		status
		sleep 1m &
		wait
	done
else
	"$PREFIX"/bin/dwmblocks "$@"
fi
